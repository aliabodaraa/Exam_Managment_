<div class="title flex items-center justify-between">
  <h2 mat-dialog-title class="dark:text-white">Install Angular</h2>
  <app-languages class="px-6"></app-languages>
</div>
<mat-dialog-content class="mat-typography dark:text-gray-300">
  <form [formGroup]="form" (reset)="onReset($event)" (ngSubmit)="onSubmit($event)" class="form hidden">
    <div class="form-field">
      <label for="name">First Name</label>
      <input [errorStateMatcher]="showErrorStrategy" formControlName="firstName" type="text" id="name"
        placeholder="Enter your name">
    </div>
    <div class="form-field">
      <label for="last-name">Last Name</label>
      <input formControlName="lastName" type="text" id="last-name" placeholder="Enter your last name">
    </div>
    <div class="form-field">
      <label for="nickname">Nickname</label>
      <input formControlName="nickname" type="text" id="nickname" placeholder="Come up with a nickname">
      <ng-container *ngIf="form.controls.nickname as nickname">
        <div class="input-info" *ngIf="nickname.pending">Checking nickname...</div>
      </ng-container>
    </div>
    <div class="form-field">
      <label for="email">Email</label>
      <input formControlName="email" type="email" id="email" placeholder="Provide your email">
    </div>
    <div class="form-field-inline-group">
      <div class="form-field form-field--small">
        <label for="year-of-birth">Year of birth</label>
        <select formControlName="yearOfBirth" id="year-of-birth">
          <option *ngFor="let year of years" [value]="year">{{year}}</option>
        </select>
      </div>
      <div class="form-field form-field--small">
        <label for="passport">Passport Number</label>
        <input formControlName="passport" type="text" id="passport" placeholder="Provide Passport Data">
      </div>
    </div>
    <fieldset formGroupName="address">
      <legend>Address</legend>
      <div class="form-field">
        <label for="full-address">Full Address</label>
        <input formControlName="fullAddress" type="text" id="full-address" placeholder="Street name and house number">
      </div>
      <div class="form-field">
        <label for="city">City</label>
        <input formControlName="city" type="text" id="city" placeholder="City">
      </div>
      <div class="form-field">
        <label for="post-code">Post Code</label>
        <input formControlName="postCode" type="number" id="post-code" placeholder="Post code">
      </div>
    </fieldset>
    <fieldset formArrayName="phones">
      <legend>Phones</legend>
      <div class="control-buttons">
        <button class="add-button" (click)="addPhone()" type="button">+</button>
      </div>
      <div class="form-field" *ngFor="let phone of form.controls.phones.controls; index as i" [formGroupName]="i">
        <label for="phone-{{i}}">Phone number</label>
        <div class="control-container">
          <select class="phone-label-dropdown" formControlName="label">
            <option *ngFor="let label of phoneLabels" [value]="label">{{label}}</option>
          </select>
          <input formControlName="phone" type="text" placeholder="Enter Phone Number" id="phone-{{i}}">
          <button class="remove-button" (click)="removePhone(i)" type="button">-</button>
        </div>
      </div>
    </fieldset>
    <fieldset formGroupName="skills">
      <legend>User Skills</legend>
      <ng-container *ngIf="skills$ | async as skills; else loading">
        <div class="skill-container" *ngFor="let skill of skills">
          <input type="checkbox" [formControlName]="skill" [id]="skill">
          <label [for]="skill">{{ skill | titlecase }}</label>
        </div>
      </ng-container>

    </fieldset>
    <fieldset formGroupName="password" [container]="containerDir.container">
      <legend>Password</legend>
      <div class="form-field">
        <label for="password">Create Password</label>
        <input formControlName="password" type="password" id="password" placeholder="Enter password...">
      </div>
      <div class="form-field">
        <label for="confirm-password">Confirm Password</label>
        <input withoutValidationErrors formControlName="confirmPassword" type="password" id="confirm-password"
          placeholder="Enter password...">
        <ng-container validatorMessageContainer #containerDir="validatorMessageContainer"></ng-container>
      </div>
    </fieldset>
    <button [disabled]="form.invalid || form.pending">Save</button>
    <button class="reset-button" type="reset" [disabled]="form.pristine">Reset</button>
  </form>


  <section class="bg-gray-50 dark:bg-gray-900">
    <div class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0">
      <div
        class="w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700">
        <div class="p-6 space-y-4 md:space-y-6 sm:p-8">
          <h1 class="text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white">
            Create an account
          </h1>
          {{userForm.value|json}}
          <form (reset)="onResetUserForm($event)" (ngSubmit)="onSubmitUserForm($event)" class="space-y-4 md:space-y-6"
            [formGroup]="userForm">
            <div>
              <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Your email</label>
              <input formControlName="email" type="email" name="email" id="email"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                placeholder="name@company.com" required="">
            </div>
            <div>
              <label for="username"
                class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">username</label>
              <input formControlName="username" type="username" name="username" id="username"
                placeholder="Enter Your Name"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                required="">
            </div>
            <ng-container formGroupName="password">
              <div>
                <label for="password"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Password</label>
                <input formControlName="password" type="password" name="password" id="password" placeholder="••••••••"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  required="">
              </div>

              <div>
                <label for="confirm-password"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Confirm
                  password</label>
                <input formControlName="confirmPassword" type="confirm-password" name="confirm-password"
                  id="confirm-password" placeholder="••••••••"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
              </div>
            </ng-container>
            <div>
              <label for="roles" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Roles</label>
              <ng-container *ngIf="(roles$ | async)?.roles as roles; else roles_loading">
                <select formControlName="role"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                  <ng-container *ngFor="let role of roles">
                    <option [value]="role">{{ 'VOC.ROLES.'+role | translate }}</option>
                  </ng-container>
                </select>
              </ng-container>
            </div>
            <div>
              <label for="temporary_role" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Temporary
                Role</label>
              <ng-container *ngIf="(roles$ | async)?.temporary_roles as temporary_roles; else temporary_roles_loading">
                <select formControlName="temporary_role"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                  <ng-container *ngFor="let tmp_role of temporary_roles">
                    <option [value]="tmp_role">{{ 'VOC.TEMPORARY_ROLES.'+tmp_role | translate }}</option>
                  </ng-container>
                </select>
              </ng-container>
            </div>
            <div class="flex items-start">
              <div class="flex items-center h-5">
                <input id="terms" aria-describedby="terms" type="checkbox"
                  class="w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-primary-600 dark:ring-offset-gray-800"
                  required="">
              </div>
              <div class="ml-3 text-sm">
                <label for="terms" class="font-light text-gray-500 dark:text-gray-300">I accept the <a
                    class="font-medium text-primary-600 hover:underline dark:text-primary-500" href="#">Terms and
                    Conditions</a></label>
              </div>
            </div>



            <button type="submit" [disabled]="userForm.invalid || userForm.pending"
              class="w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">Create
              User</button>
            <button type="reset" [disabled]="userForm.invalid || userForm.pending"
              class="w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">Reset</button>
            <p class="text-sm font-light text-gray-500 dark:text-gray-400">
              Already have an account? <a href="#"
                class="font-medium text-primary-600 hover:underline dark:text-primary-500">Login here</a>
            </p>
          </form>
        </div>
      </div>
    </div>
  </section>
  <ng-template #loading>
    <p>skills are loading...</p>
  </ng-template>
  <ng-template #temporary_roles_loading>
    <p>Temporary Roles are loading...</p>
  </ng-template>
  <ng-template #roles_loading>
    <p>Roles are loading...</p>
  </ng-template>

</mat-dialog-content>
<mat-dialog-actions align="end" class="dark:text-gray-300">
  <button mat-button mat-dialog-close>Cancel</button>
  <button mat-button [mat-dialog-close]="true" cdkFocusInitial>Install</button>
</mat-dialog-actions>